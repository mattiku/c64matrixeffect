/*
 * Author: Matti Kuonanoja (2015)
 */

#include "backgroundimage.h"

#define BACKGROUND_IMAGE_WIDTH 40
#define BACKGROUND_IMAGE_HEIGHT 25

static char background_image[] = {
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x80, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0xE0, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0xF0, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0xF8, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0xFC, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0xFE, 0x61, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x7E, 0x80, 0xFF, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x3F, 0x80, 0x7F, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x1F, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x1F, 0x80, 0x1F, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x1F, 0x80, 0x0F, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x1F, 0x80, 0x0F, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x1F, 0x80, 0x1F, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x1F, 0x80, 0x3F, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x3F, 0x80, 0x7F, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x7E, 0x80, 0xFF, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0xFE, 0x61, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0xFC, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0xF8, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0xF0, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0xE0, 0x7F, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x80, 0x1F, 0x00, 0x00, 0x00, 0x00, 0x00, 
    0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

static const char bitmasks[] = {0x80, 0x40, 0x20, 0x10, 0x08, 0x04, 0x02, 0x01};

char is_background_pixel_on(char x, char y) {
    char bitmask;
    char image_byte_x;

    if (x < BACKGROUND_IMAGE_WIDTH && y < BACKGROUND_IMAGE_HEIGHT) {
        image_byte_x = x / 8;
        bitmask = bitmasks[7 - (x % 8)];
        return background_image[image_byte_x + y * 8] & bitmask;
    }
    return 0;
}